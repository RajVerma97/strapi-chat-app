{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/rajneeshverma/Desktop/web-dev/strapi-chat-app/frontend/src/hooks/use-user.ts"],"sourcesContent":["import { User } from \"@/types/login-user\";\nimport { useEffect, useState } from \"react\";\n\nexport const useUser = () => {\n  const [user, setUser] = useState<User | null>(null);\n\n  useEffect(() => {\n    const userString = localStorage.getItem(\"user\");\n    if (userString) {\n      setUser(JSON.parse(userString));\n    }\n  }, []);\n\n  return user;\n};\n"],"names":[],"mappings":";;;AACA;;AAEO,MAAM,UAAU;IACrB,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAE9C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,aAAa,aAAa,OAAO,CAAC;QACxC,IAAI,YAAY;YACd,QAAQ,KAAK,KAAK,CAAC;QACrB;IACF,GAAG,EAAE;IAEL,OAAO;AACT"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///Users/rajneeshverma/Desktop/web-dev/strapi-chat-app/frontend/src/socket-io.ts"],"sourcesContent":["import { io } from \"socket.io-client\";\nimport { NEXT_PUBLIC_BACKEND } from \"./contants/constants\";\n\nconst socket = io(`${NEXT_PUBLIC_BACKEND}`, {\n  transports: [\"websocket\", \"polling\"],\n  withCredentials: true,\n  path: \"/socket.io/\",\n  reconnectionAttempts: 5,\n  reconnectionDelay: 1000,\n  secure: true,\n});\n\nexport default socket;\n"],"names":[],"mappings":";;;AAAA;AACA;AADA;;;AAGA,MAAM,SAAS,CAAA,GAAA,wLAAA,CAAA,KAAE,AAAD,EAAE,GAAG,4HAAA,CAAA,sBAAmB,EAAE,EAAE;IAC1C,YAAY;QAAC;QAAa;KAAU;IACpC,iBAAiB;IACjB,MAAM;IACN,sBAAsB;IACtB,mBAAmB;IACnB,QAAQ;AACV;uCAEe"}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///Users/rajneeshverma/Desktop/web-dev/strapi-chat-app/frontend/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useLogout } from \"@/hooks/use-logout\";\nimport { useUser } from \"@/hooks/use-user\";\nimport socket from \"@/socket-io\";\nimport { use, useEffect, useState } from \"react\";\n\ntype ChatMessage = {\n  type: string;\n  content: string;\n  sender: number;\n  receiver: number;\n};\n\nexport default function Home() {\n  const [data, setData] = useState<ChatMessage[]>([]);\n  const [message, setMessage] = useState(\"\");\n  const user = useUser();\n\n  useEffect(() => {\n    // Listen for incoming messages\n    socket.on(\"newMessage\", (incomingMessage: ChatMessage) => {\n      setData((prev) => [...prev, incomingMessage]);\n    });\n\n    // Clean up the socket listener on component unmount\n    return () => {\n      socket.off(\"newMessage\");\n    };\n  }, []); // Add empty dependency array to ensure the listener is added only once\n\n  const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n\n    if (!message.trim()) return; // Prevent empty messages\n    if (!user) {\n      console.error(\"User is not logged in\");\n      return;\n    }\n\n    const messageData: ChatMessage = {\n      type: \"text\",\n      content: message,\n      sender: user.id,\n      receiver: user.id, // Adjust this as per actual recipient logic\n    };\n\n    socket.emit(\"sendMessage\", messageData); // Send message to the server\n    setMessage(\"\"); // Clear input after sending\n  };\n  const logout = useLogout();\n\n  const handleLogout = () => {\n    logout();\n  };\n\n  return (\n    <div className=\"p-4\">\n      <h1 className=\"text-xl font-bold\">Chat Application</h1>\n      <div className=\"my-4\">\n        {user ? (\n          <div>\n            <p>Username: {user.username}</p>\n            <p>Email: {user.email}</p>\n\n            <button onclick={handleLogout}>logout</button>\n          </div>\n        ) : (\n          <p>Please log in to start chatting.</p>\n        )}\n      </div>\n\n      {user ? (\n        <form onSubmit={handleSubmit} className=\"mb-4\">\n          <label htmlFor=\"message\" className=\"block mb-2 text-sm font-medium\">\n            Message\n          </label>\n          <input\n            type=\"text\"\n            name=\"message\"\n            placeholder=\"Type your message\"\n            className=\"w-full p-2 border border-gray-300 rounded-md text-black\"\n            value={message}\n            onChange={(e) => setMessage(e.target.value)}\n          />\n          <button\n            type=\"submit\"\n            className=\"mt-2 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600\"\n          >\n            Send Message\n          </button>\n        </form>\n      ) : (\n        <p className=\"text-red-500\">Login to send messages.</p>\n      )}\n\n      <h2 className=\"text-lg font-semibold\">Chat Messages</h2>\n      <div className=\"mt-4\">\n        {data.length > 0 ? (\n          data.map((msg, index) => (\n            <div key={`${msg.sender}-${index}`} className=\"mb-2\">\n              <span className=\"font-bold\">{msg.sender}</span>: {msg.content}\n            </div>\n          ))\n        ) : (\n          <p>No messages yet.</p>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAce,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB,EAAE;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,OAAO,CAAA,GAAA,2HAAA,CAAA,UAAO,AAAD;IAEnB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,+BAA+B;QAC/B,mHAAA,CAAA,UAAM,CAAC,EAAE,CAAC,cAAc,CAAC;YACvB,QAAQ,CAAC,OAAS;uBAAI;oBAAM;iBAAgB;QAC9C;QAEA,oDAAoD;QACpD,OAAO;YACL,mHAAA,CAAA,UAAM,CAAC,GAAG,CAAC;QACb;IACF,GAAG,EAAE,GAAG,uEAAuE;IAE/E,MAAM,eAAe,CAAC;QACpB,MAAM,cAAc;QAEpB,IAAI,CAAC,QAAQ,IAAI,IAAI,QAAQ,yBAAyB;QACtD,IAAI,CAAC,MAAM;YACT,QAAQ,KAAK,CAAC;YACd;QACF;QAEA,MAAM,cAA2B;YAC/B,MAAM;YACN,SAAS;YACT,QAAQ,KAAK,EAAE;YACf,UAAU,KAAK,EAAE;QACnB;QAEA,mHAAA,CAAA,UAAM,CAAC,IAAI,CAAC,eAAe,cAAc,6BAA6B;QACtE,WAAW,KAAK,4BAA4B;IAC9C;IACA,MAAM,SAAS,CAAA,GAAA,6HAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,eAAe;QACnB;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAoB;;;;;;0BAClC,8OAAC;gBAAI,WAAU;0BACZ,qBACC,8OAAC;;sCACC,8OAAC;;gCAAE;gCAAW,KAAK,QAAQ;;;;;;;sCAC3B,8OAAC;;gCAAE;gCAAQ,KAAK,KAAK;;;;;;;sCAErB,8OAAC;4BAAO,SAAS;sCAAc;;;;;;;;;;;yCAGjC,8OAAC;8BAAE;;;;;;;;;;;YAIN,qBACC,8OAAC;gBAAK,UAAU;gBAAc,WAAU;;kCACtC,8OAAC;wBAAM,SAAQ;wBAAU,WAAU;kCAAiC;;;;;;kCAGpE,8OAAC;wBACC,MAAK;wBACL,MAAK;wBACL,aAAY;wBACZ,WAAU;wBACV,OAAO;wBACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;;;;;;kCAE5C,8OAAC;wBACC,MAAK;wBACL,WAAU;kCACX;;;;;;;;;;;qCAKH,8OAAC;gBAAE,WAAU;0BAAe;;;;;;0BAG9B,8OAAC;gBAAG,WAAU;0BAAwB;;;;;;0BACtC,8OAAC;gBAAI,WAAU;0BACZ,KAAK,MAAM,GAAG,IACb,KAAK,GAAG,CAAC,CAAC,KAAK,sBACb,8OAAC;wBAAmC,WAAU;;0CAC5C,8OAAC;gCAAK,WAAU;0CAAa,IAAI,MAAM;;;;;;4BAAQ;4BAAG,IAAI,OAAO;;uBADrD,GAAG,IAAI,MAAM,CAAC,CAAC,EAAE,OAAO;;;;8CAKpC,8OAAC;8BAAE;;;;;;;;;;;;;;;;;AAKb"}},
    {"offset": {"line": 299, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}